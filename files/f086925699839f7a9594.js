function _readOnlyError(e){throw new TypeError('"'+e+'" is read-only')}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_toPropertyKey(r.key),r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){e=_toPrimitive(e,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(n){var r=_isNativeReflectConstruct();return function(){var e,t=_getPrototypeOf(n);return _possibleConstructorReturn(this,r?(e=_getPrototypeOf(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).aez_bundle_main=e()}(function(){return function r(o,a,i){function u(t,e){if(!a[t]){if(!o[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(s)return s(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}n=a[t]={exports:{}},o[t][0].call(n.exports,function(e){return u(o[t][1][e]||e)},n,n.exports,r,o,a,i)}return a[t].exports}for(var s="function"==typeof require&&require,e=0;e<i.length;e++)u(i[e]);return u}({1:[function(e,t,n){"use strict";function r(){}Object.defineProperty(n,"__esModule",{value:!0}),r.asHoverable=function(e,t){return e.hoverable=!0,e.touchable=!0,e.hovered=e.hovered||new g.Trigger,e.unhovered=e.unhovered||new g.Trigger,t&&t.cursor&&(e.cursor=t.cursor),e},r.asUnhoverable=function(e){return delete e.hoverable,e.hovered&&!e.hovered.destroyed()&&(e.hovered.destroy(),delete e.hovered),e.unhovered&&!e.unhovered.destroyed()&&(e.unhovered.fire(),e.unhovered.destroy(),delete e.unhovered),e},n.Converter=r},{}],2:[function(e,t,n){"use strict";function r(e,t,n){void 0===n&&(n={}),this.game=e,this.view=t.view,this.beforeHover=null,this.operationTrigger=new g.Trigger,this._cursor=n.cursor||"pointer",this._showTooltip=!!n.showTooltip,this._getScale=t.getScale?function(){return t.getScale()}:null,this._onMouseMove_bound=this._onMouseMove.bind(this),this._onMouseOut_bound=this._onMouseOut.bind(this)}Object.defineProperty(n,"__esModule",{value:!0}),r.isSupported=function(){return"undefined"!=typeof document&&"function"==typeof document.addEventListener},r.prototype.start=function(){return this.view.addEventListener("mousemove",this._onMouseMove_bound,!1),this.view.addEventListener("mouseout",this._onMouseOut_bound,!1),!0},r.prototype.stop=function(){this.view.removeEventListener("mousemove",this._onMouseMove_bound,!1),this.view.removeEventListener("mouseout",this._onMouseOut_bound,!1)},r.prototype._onMouseMove=function(e){var t,n,r=this.game.scene();r&&(n=(t=this.view.getBoundingClientRect()).left+window.pageXOffset,t=t.top+window.pageYOffset,n=e.pageX-n,e=e.pageY-t,t={x:1,y:1},n={x:n/(t=this._getScale?this._getScale():t).x,y:e/t.y},(e=r.findPointSourceByPoint(n).target)&&e.hoverable?(e!==this.beforeHover&&(this.beforeHover&&this.beforeHover.hoverable&&this._onUnhovered(e),this._onHovered(e)),this.beforeHover=e):this.beforeHover&&this._onUnhovered(this.beforeHover))},r.prototype._onHovered=function(e){e.hoverable&&(this.view.style.cursor=e.cursor||this._cursor,this._showTooltip&&e.title&&this.view.setAttribute("title",e.title),e.hovered.fire())},r.prototype._onUnhovered=function(e){this.view.style.cursor="auto",this.beforeHover&&this.beforeHover.unhovered&&(this.beforeHover.unhovered.fire(),this._showTooltip&&this.view.removeAttribute("title")),this.beforeHover=null},r.prototype._onMouseOut=function(){this.beforeHover&&this._onUnhovered(this.beforeHover)},t.exports=r},{}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./Converter"),r=(n.Converter=r.Converter,e("./HoverPlugin"));n.HoverPlugin=r},{"./Converter":1,"./HoverPlugin":2}],4:[function(e,t,n){var o=e("./main");t.exports=function(t){var n={},r=(Object.keys(t).forEach(function(e){n[e]=t[e]}),n.sessionParameter={},n.isAtsumaru="undefined"!=typeof window&&void 0!==window.RPGAtsumaru,new g.Scene({game:g.game}));r.onMessage.add(function(e){e.data&&"start"===e.data.type&&e.data.parameters&&(n.sessionParameter=e.data.parameters,null!=e.data.parameters.randomSeed&&(n.randomSeed=e.data.parameters.randomSeed),g.game.popScene(),o.main(n))}),r.onLoad.add(function(){var e=0;r.onUpdate.add(function(){3<++e&&(g.game.popScene(),o.main(n))})}),g.game.pushScene(r)}},{"./main":5}],5:[function(e,t,n){var c=e("@akashic-extension/akashic-hover-plugin"),f=function(){_inherits(o,g.E);var r=_createSuper(o);function o(e,t,n){return _classCallCheck(this,o),(e=r.call(this,{scene:e,parent:e,width:t.width,height:t.height})).surface=t,e.game=n,e}return _createClass(o,[{key:"renderSelf",value:function(e){this.game._render(),e.drawImage(this.surface,0,0,this.surface.width,this.surface.height,0,0)}}]),o}();n.main=void 0,n.main=function(n){var r="undefined"!=typeof navigator&&(navigator.userAgent.includes("iPhone")||navigator.userAgent.includes("Android")),o=e("./wasm"),a=new g.Scene({game:g.game}),i=!(g.game.vars.sounds=[1]),u=!1,s=g.game.resourceFactory.createSurface(g.game.width,g.game.height);o.preRun=function(){o.canvas=s._drawable,o.fontlib=[],o.fonthandle=0,o.canvaslib=[],o.lineCap=["butt","round","square"],o.lineJoin=["bevel","round","miter"]},o.postRun=function(){var e,t;u||null!=o&&o.calledRun&&i&&(u=!0,(e=c.Converter.asHoverable(new f(a,s,o))).onPointDown.add(function(e){o._pointDown(e.pointerId,e.point.x,e.point.y)}),e.onPointMove.add(function(e){o._pointDrag(e.pointerId,e.point.x+e.startDelta.x,e.point.y+e.startDelta.y)}),e.onPointUp.add(function(e){o._pointUp(e.pointerId,e.point.x+e.startDelta.x,e.point.y+e.startDelta.y)}),e.hovered.add(function(e){o._pointMove(e.x,e.y)}),e.unhovered.add(function(){o._pointLeave()}),a.onUpdate.add(function(){o._update(),g.game.modified()}),(e=g.game.renderers[0].surface.canvas).tabIndex=-1,e.focus(),t=o.cwrap("key","boolean",["string"]),window.addEventListener("keydown",function(e){!g.game.isSkipping&&t(e.key,!0,e.repeat)&&e.preventDefault()}),window.addEventListener("keyup",function(e){t(e.key,!1)&&e.preventDefault()}),o._start(n.randomSeed,n.isAtsumaru,r))},i=!0,n.isAtsumaru&&(a.setTimeout(function(){},6e5),window.RPGAtsumaru.popups.setThanksSettings({autoThanks:!1})),g.game.vars.time=120,n.sessionParameter.totalTimeLimit&&(g.game.vars.time=n.sessionParameter.totalTimeLimit),g.game.vars.gameState={score:0},a.onUpdate.add(function e(){g.game.vars.time<=0&&(n.isAtsumaru&&(window.RPGAtsumaru.experimental.scoreboards.setRecord(1,g.game.vars.gameState.score).then(function(){window.RPGAtsumaru.experimental.scoreboards.display(1)}),g.game.terminateGame()),a.onUpdate.remove(e)),g.game.vars.time-=1/g.game.fps}),g.game.pushScene(a)}},{"./wasm":6,"@akashic-extension/akashic-hover-plugin":3}],6:[function(T,e,z){var W,v={locateFile:function(e){return g.game._assetManager.configuration.wasm.path}},G=(e.exports=v,void 0),v=void 0!==v?v:{},e=Object.assign({},v),O=function(e,t){throw t},N=!0,a=!1,t="";(N||a)&&(a?t=self.location.href:"undefined"!=typeof document&&document.currentScript&&(t=document.currentScript.src),t=0!==t.indexOf("blob:")?t.substr(0,t.replace(/[?#].*/,"").lastIndexOf("/")+1):"",a&&(W=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}));var i,c=v.print||console.log.bind(console),f=v.printErr||console.warn.bind(console);function s(e){s.shown||(s.shown={}),s.shown[e]||(s.shown[e]=1,f(e))}Object.assign(v,e),v.arguments&&v.arguments,v.thisProgram&&v.thisProgram,v.quit&&(O=v.quit),v.wasmBinary&&(i=v.wasmBinary);var j,V=v.noExitRuntime||!0;function u(e,t,n,r){var o=2<arguments.length&&void 0!==n?n:"i8";switch(o="*"===o.charAt(o.length-1)?"i32":o){case"i1":case"i8":d[e>>0]=t;break;case"i16":X[e>>1]=t;break;case"i32":h[e>>2]=t;break;case"i64":E=[t>>>0,(E=t,1<=+Math.abs(E)?0<E?(0|Math.min(+Math.floor(E/4294967296),4294967295))>>>0:~~+Math.ceil((E-(~~E>>>0))/4294967296)>>>0:0)],h[e>>2]=E[0],h[e+4>>2]=E[1];break;case"float":b[e>>2]=t;break;case"double":J[e>>3]=t;break;default:B("invalid type for setValue: "+o)}}"object"!=("undefined"==typeof WebAssembly?"undefined":_typeof(WebAssembly))&&B("no native wasm support detected");var n,l=!1;function q(e,t){e||B(t)}function H(e){return v["_"+e]}function Y(e,t,n,r,o){var a={string:function(e){var t,n=0;return null!=e&&0!==e&&(t=1+(e.length<<2),n=Se(t),$(e,m,n,t)),n},array:function(e){var t=Se(e.length);return d.set(e,t),t}};var e=H(e),i=[],u=0;if(r)for(var s=0;s<r.length;s++){var c=a[n[s]];c?(0===u&&(u=_e()),i[s]=c(r[s])):i[s]=r[s]}e=e.apply(null,i);return e=e,0!==u&&Fe(u),e=e,"string"===t?y(e):"boolean"===t?Boolean(e):e}var p,d,m,X,K,h,w,b,J,Q="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function Z(e,t,n){for(var r=t+n,o=t;e[o]&&!(r<=o);)++o;if(16<o-t&&e.buffer&&Q)return Q.decode(e.subarray(t,o));for(var a="";t<o;){var i,u,s=e[t++];128&s?(u=63&e[t++],192==(224&s)?a+=String.fromCharCode((31&s)<<6|u):(i=63&e[t++],(s=224==(240&s)?(15&s)<<12|u<<6|i:(7&s)<<18|u<<12|i<<6|63&e[t++])<65536?a+=String.fromCharCode(s):(u=s-65536,a+=String.fromCharCode(55296|u>>10,56320|1023&u)))):a+=String.fromCharCode(s)}return a}function y(e,t){return e?Z(m,e,t):""}function $(e,t,n,r){if(!(0<r))return 0;for(var o=n,a=n+r-1,i=0;i<e.length;++i){var u=e.charCodeAt(i);if((u=55296<=u&&u<=57343?65536+((1023&u)<<10)|1023&e.charCodeAt(++i):u)<=127){if(a<=n)break;t[n++]=u}else{if(u<=2047){if(a<=n+1)break;t[n++]=192|u>>6}else{if(u<=65535){if(a<=n+2)break;t[n++]=224|u>>12}else{if(a<=n+3)break;t[n++]=240|u>>18,t[n++]=128|u>>12&63}t[n++]=128|u>>6&63}t[n++]=128|63&u}}return t[n]=0,n-o}function ee(e){var t=function(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);(r=55296<=r&&r<=57343?65536+((1023&r)<<10)|1023&e.charCodeAt(++n):r)<=127?++t:t+=r<=2047?2:r<=65535?3:4}return t}(e)+1,n=U(t);return n&&$(e,d,n,t),n}function te(e){p=e,v.HEAP8=d=new Int8Array(e),v.HEAP16=X=new Int16Array(e),v.HEAP32=h=new Int32Array(e),v.HEAPU8=m=new Uint8Array(e),v.HEAPU16=K=new Uint16Array(e),v.HEAPU32=w=new Uint32Array(e),v.HEAPF32=b=new Float32Array(e),v.HEAPF64=J=new Float64Array(e)}v.INITIAL_MEMORY;var ne,re=[],oe=[],ae=[],ie=[];function ue(){if(v.preRun)for("function"==typeof v.preRun&&(v.preRun=[v.preRun]);v.preRun.length;)e=v.preRun.shift(),re.unshift(e);var e;r(re)}function se(){if(v.postRun)for("function"==typeof v.postRun&&(v.postRun=[v.postRun]);v.postRun.length;)e=v.postRun.shift(),ie.unshift(e);var e;r(ie)}var x=0,ce=null,L=null;function B(e){throw v.onAbort&&v.onAbort(e),f(e="Aborted("+e+")"),l=!0,n=1,e+=". Build with -s ASSERTIONS=1 for more info.",new WebAssembly.RuntimeError(e)}v.preloadedImages={},v.preloadedAudios={};var k,E;function fe(e){return e.startsWith("data:application/octet-stream;base64,")}function le(e){try{if(e==k&&i)return new Uint8Array(i);if(W)return W(e);throw"both async and sync fetching of the wasm failed"}catch(e){B(e)}}fe(k="wasm.wasm")||(e=k,k=v.locateFile?v.locateFile(e,t):t+e);var de={18108:function(e,t,n,r){var o=I,e=y(e),a=new Uint16Array(p,t,2),t=new Uint16Array(p,t+4,3),i=g.game.assets[e];i?(o.pixelStorei(o.UNPACK_ALIGNMENT,4),o.texImage2D(r,0,o.RGBA,i.width,i.height,0,o.RGBA,o.UNSIGNED_BYTE,i.data),a[0]=i.width,a[1]=i.height,t[0]=o.RGBA,t[1]=o.RGBA,t[2]=o.UNSIGNED_BYTE):(o.pixelStorei(o.UNPACK_ALIGNMENT,4),o.texImage2D(r,0,o.RGBA,1,1,0,o.RGBA,o.UNSIGNED_BYTE,new Uint8Array(4)),a[0]=1,a[1]=1,t[0]=o.RGBA,t[1]=o.RGBA,t[2]=o.UNSIGNED_BYTE,fetch(g.game._assetManager.configuration[e].path).then(function(e){return e.blob()}).then(function(e){return e.arrayBuffer()}).then(function(e){var t=U(e.byteLength);d.set(new Uint8Array(e),t),v._onTextureLoad(t,e.byteLength,n),R(t)}))},19040:function(e){var t=g.game.vars.sounds.findIndex(function(e){return null===e}),n=(-1==t&&(t=g.game.vars.sounds.push(42)-1),{});return n.asset=g.game.assets[y(e)],n.player=null,n.play=function(){this.stop(),this.player=this.asset.play()}.bind(n),n.stop=function(){this.player&&this.player.stop()}.bind(n),n.changeVolume=function(e){this.player.changeVolume(e)}.bind(n),g.game.vars.sounds[t]=n,t},19543:function(e){g.game.vars.sounds[e].play()},19597:function(e,t){g.game.vars.sounds[e].changeVolume(t)},19638:function(e){g.game.vars.sounds[e].stop(),g.game.vars.sounds[e]=null},19700:function(e){v.fontlib[e]=null},19727:function(e,t){var n=document.createElement("canvas"),n=(n.width=n.height=128,n.getContext("2d",{willReadFrequently:!0}));return n.font="".concat(t,"px _").concat(y(e)),n.lineCap="round",n.lineJoin="round",n.textBaseline="top",n.textAlign="left",v.fontlib[++v.fonthandle]=n,v.fonthandle},20098:function(e,t,n,r,o,a,i,u){var s=v.fontlib[e],e=s.canvas,c=y(t,n),f=s.measureText(c),t=new Float32Array(p,o,3),l=new Float32Array(p,a,4*i),d=i?Math.ceil(l[3]):0,n=Math.ceil(f.actualBoundingBoxRight)+Math.ceil(f.actualBoundingBoxLeft)+1+2*d,o=Math.ceil(f.actualBoundingBoxDescent)+Math.ceil(f.actualBoundingBoxAscent)+1+2*d;(e.width<n||e.height<o)&&(e.width=n,e.height=o),s.clearRect(0,0,n,o);for(var m=0;m<i;++m)s.lineWidth=2*l[4*m+3],s.strokeStyle="rgb(".concat(255*l[4*m],", ").concat(255*l[4*m+1],", ").concat(255*l[4*m+2],")"),s.strokeText(c,Math.ceil(f.actualBoundingBoxLeft)+d,Math.ceil(f.actualBoundingBoxAscent)+d);s.fillStyle="rgb(".concat(255*t[0],", ").concat(255*t[1],", ").concat(255*t[2],")"),s.fillText(c,Math.ceil(f.actualBoundingBoxLeft)+d,Math.ceil(f.actualBoundingBoxAscent)+d);a=s.getImageData(0,0,n,o),g.game.vars.tmpFontData={},g.game.vars.tmpFontData.data=a,g.game.vars.tmpFontData.tm=f,g.game.vars.tmpFontData.maxStroke=d,e=new Uint16Array(p,r,2),e[0]=a.width,e[1]=a.height,t=new Uint16Array(p,u,2);t[0]=~~(256*(f.actualBoundingBoxRight+f.actualBoundingBoxLeft+2*d)),t[1]=~~(256*(f.actualBoundingBoxDescent+f.actualBoundingBoxAscent+2*d))},21801:function(e,t){var n=g.game.vars.tmpFontData.data,r=g.game.vars.tmpFontData.tm,o=g.game.vars.tmpFontData.maxStroke,e=(delete g.game.vars.tmpFontData,new Uint32Array(p,e,n.width*n.height)),n=new Uint32Array(n.data.buffer,n.data.byteOffset,n.width*n.height),e=(e.set(n),new Int16Array(p,t,2));e[0]=~~(256*-r.actualBoundingBoxLeft),e[1]=~~(256*(r.actualBoundingBoxDescent+o))},22301:function(e,t){for(var n=document.createElement("canvas"),r=(n.width=e,n.height=t,0);null!=v.canvaslib[r];++r);e={};return(v.canvaslib[r]=e).canvas=n,e.g=n.getContext("2d"),r},22551:function(e){v.canvaslib[e]=void 0},22582:function(e,t,n,r,o,a,i,u,s,c,f){e=v.canvaslib[e].g;e.lineWidth=t,e.lineCap=n,e.lineJoin=r,e.strokeStyle="#"+(o>>>0).toString(16),e.beginPath(),e.ellipse(a,i,u,s,0,c,f),e.stroke()},22780:function(e){e=v.canvaslib[e].canvas;return e.width*e.height},22861:function(e,t,n){var e=v.canvaslib[e],e=e.g.getImageData(0,0,e.canvas.width,e.canvas.height),t=new Uint32Array(p,t,e.width*e.height),r=new Uint32Array(e.data.buffer,e.data.byteOffset,e.width*e.height),t=(t.set(r),new Int32Array(p,n,2));t[0]=e.width,t[1]=e.height},23249:function(e){var t,e=y(e),n=(g.game.vars.loadinId=null!=(t=g.game.vars.loadinId)?t:0,g.game.vars.loadinId++);return fetch(g.game._assetManager.configuration[e].path).then(function(e){return e.blob()}).then(function(e){return e.arrayBuffer()}).then(function(e){var t=U(e.byteLength);d.set(new Uint8Array(e),t),v._onLoad(t,e.byteLength,n)}),n},23619:function(e){new Float32Array(p,e,1)[0]=g.game.vars.time},23674:function(){for(var e=0,t=I,n=0,r=["floor","wall","ceil"];n<r.length;n++){var o=g.game.assets[r[n]];t.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,e++,128,128,1,t.RGBA,t.UNSIGNED_BYTE,o.data)}},23896:function(e){g.game.vars.gameState.score=e}};function r(e){for(;0<e.length;){var t,n=e.shift();"function"==typeof n?n(v):"number"==typeof(t=n.func)?void 0===n.arg?C(t)():C(t)(n.arg):t(void 0===n.arg?null:n.arg)}}var o=[];function C(e){var t=o[e];return t||(e>=o.length&&(o.length=e+1),o[e]=t=ne.get(e)),t}function me(e){if(e instanceof Ae||"unwind"==e)return n;O(1,e)}var ve=[];var pe={buffers:[null,[],[]],printChar:function(e,t){var n=pe.buffers[e];0===t||10===t?((1===e?c:f)(Z(n,0)),n.length=0):n.push(t)},varargs:void 0,get:function(){return pe.varargs+=4,h[pe.varargs-4>>2]},getStr:function(e){return y(e)},get64:function(e,t){return e}};var _={counter:1,buffers:[],mappedBuffers:{},programs:[],framebuffers:[],renderbuffers:[],textures:[],shaders:[],vaos:[],contexts:[],offscreenCanvases:{},queries:[],samplers:[],transformFeedbacks:[],syncs:[],byteSizeByTypeRoot:5120,byteSizeByType:[1,1,2,2,4,4,4,2,3,4,8],stringCache:{},stringiCache:{},unpackAlignment:4,recordError:function(e){_.lastError||(_.lastError=e)},getNewId:function(e){for(var t=_.counter++,n=e.length;n<t;n++)e[n]=null;return t},MAX_TEMP_BUFFER_SIZE:2097152,numTempVertexBuffersPerSize:64,log2ceilLookup:function(e){return 32-Math.clz32(0===e?0:e-1)},generateTempBuffers:function(e,t){var n=_.log2ceilLookup(_.MAX_TEMP_BUFFER_SIZE);t.tempVertexBufferCounters1=[],t.tempVertexBufferCounters2=[],t.tempVertexBufferCounters1.length=t.tempVertexBufferCounters2.length=n+1,t.tempVertexBuffers1=[],t.tempVertexBuffers2=[],t.tempVertexBuffers1.length=t.tempVertexBuffers2.length=n+1,t.tempIndexBuffers=[],t.tempIndexBuffers.length=n+1;for(var r=0;r<=n;++r){t.tempIndexBuffers[r]=null,t.tempVertexBufferCounters1[r]=t.tempVertexBufferCounters2[r]=0;var o=_.numTempVertexBuffersPerSize,a=(t.tempVertexBuffers1[r]=[],t.tempVertexBuffers2[r]=[],t.tempVertexBuffers1[r]),i=t.tempVertexBuffers2[r];a.length=i.length=o;for(var u=0;u<o;++u)a[u]=i[u]=null}if(e){t.tempQuadIndexBuffer=I.createBuffer(),t.GLctx.bindBuffer(34963,t.tempQuadIndexBuffer);for(var s=_.MAX_TEMP_BUFFER_SIZE>>1,c=new Uint16Array(s),r=0,f=0;;){if(c[r++]=f,s<=r)break;if(c[r++]=f+1,s<=r)break;if(c[r++]=f+2,s<=r)break;if(c[r++]=f,s<=r)break;if(c[r++]=f+2,s<=r)break;if(c[r++]=f+3,s<=r)break;f+=4}t.GLctx.bufferData(34963,c,35044),t.GLctx.bindBuffer(34963,null)}},getTempVertexBuffer:function(e){var e=_.log2ceilLookup(e),t=_.currentContext.tempVertexBuffers1[e],n=_.currentContext.tempVertexBufferCounters1[e],r=(_.currentContext.tempVertexBufferCounters1[e]=_.currentContext.tempVertexBufferCounters1[e]+1&_.numTempVertexBuffersPerSize-1,t[n]);return r||(r=I.getParameter(34964),t[n]=I.createBuffer(),I.bindBuffer(34962,t[n]),I.bufferData(34962,1<<e,35048),I.bindBuffer(34962,r),t[n])},getTempIndexBuffer:function(e){var e=_.log2ceilLookup(e),t=_.currentContext.tempIndexBuffers[e];return t||(t=I.getParameter(34965),_.currentContext.tempIndexBuffers[e]=I.createBuffer(),I.bindBuffer(34963,_.currentContext.tempIndexBuffers[e]),I.bufferData(34963,1<<e,35048),I.bindBuffer(34963,t),_.currentContext.tempIndexBuffers[e])},newRenderingFrameStarted:function(){if(_.currentContext)for(var e=_.currentContext.tempVertexBuffers1,t=(_.currentContext.tempVertexBuffers1=_.currentContext.tempVertexBuffers2,_.currentContext.tempVertexBuffers2=e,e=_.currentContext.tempVertexBufferCounters1,_.currentContext.tempVertexBufferCounters1=_.currentContext.tempVertexBufferCounters2,_.currentContext.tempVertexBufferCounters2=e,_.log2ceilLookup(_.MAX_TEMP_BUFFER_SIZE)),n=0;n<=t;++n)_.currentContext.tempVertexBufferCounters1[n]=0},getSource:function(e,t,n,r){for(var o="",a=0;a<t;++a){var i=r?h[r+4*a>>2]:-1;o+=y(h[n+4*a>>2],i<0?void 0:i)}return o},calcBufLength:function(e,t,n,r){return 0<n?r*n:e*_.byteSizeByType[t-_.byteSizeByTypeRoot]*r},usedTempBuffers:[],preDrawHandleClientVertexAttribBindings:function(e){_.resetBufferBinding=!1;for(var t=0;t<_.currentContext.maxVertexAttribs;++t){var n,r,o=_.currentContext.clientBuffers[t];o.clientside&&o.enabled&&(_.resetBufferBinding=!0,n=_.calcBufLength(o.size,o.type,o.stride,e),r=_.getTempVertexBuffer(n),I.bindBuffer(34962,r),I.bufferSubData(34962,0,m.subarray(o.ptr,o.ptr+n)),o.vertexAttribPointerAdaptor.call(I,t,o.size,o.type,o.normalized,o.stride,0))}},postDrawHandleClientVertexAttribBindings:function(){_.resetBufferBinding&&I.bindBuffer(34962,_.buffers[I.currentArrayBufferBinding])},createContext:function(n,e){n.getContextSafariWebGL2Fixed||(n.getContextSafariWebGL2Fixed=n.getContext,n.getContext=function(e,t){t=n.getContextSafariWebGL2Fixed(e,t);return"webgl"==e==t instanceof WebGLRenderingContext?t:null});var t=1<e.majorVersion?n.getContext("webgl2",e):n.getContext("webgl",e);return t?_.registerContext(t,e):0},registerContext:function(e,t){var n=_.getNewId(_.contexts),r={handle:n,attributes:t,version:t.majorVersion,GLctx:e};e.canvas&&(e.canvas.GLctxObject=r),_.contexts[n]=r,void 0!==t.enableExtensionsByDefault&&!t.enableExtensionsByDefault||_.initExtensions(r),r.maxVertexAttribs=r.GLctx.getParameter(34921),r.clientBuffers=[];for(var o=0;o<r.maxVertexAttribs;o++)r.clientBuffers[o]={enabled:!1,clientside:!1,size:0,type:0,normalized:0,stride:0,ptr:0,vertexAttribPointerAdaptor:null};return _.generateTempBuffers(!1,r),n},makeContextCurrent:function(e){return _.currentContext=_.contexts[e],v.ctx=I=_.currentContext&&_.currentContext.GLctx,!(e&&!I)},getContext:function(e){return _.contexts[e]},deleteContext:function(e){_.currentContext===_.contexts[e]&&(_.currentContext=null),"object"==("undefined"==typeof JSEvents?"undefined":_typeof(JSEvents))&&JSEvents.removeAllHandlersOnTarget(_.contexts[e].GLctx.canvas),_.contexts[e]&&_.contexts[e].GLctx.canvas&&(_.contexts[e].GLctx.canvas.GLctxObject=void 0),_.contexts[e]=null},initExtensions:function(e){var t,a,n,r,o;(e=e||_.currentContext).initExtensionsDone||(e.initExtensionsDone=!0,t=e.GLctx,(a=(r=t).getExtension("ANGLE_instanced_arrays"))&&(r.vertexAttribDivisor=function(e,t){a.vertexAttribDivisorANGLE(e,t)},r.drawArraysInstanced=function(e,t,n,r){a.drawArraysInstancedANGLE(e,t,n,r)},r.drawElementsInstanced=function(e,t,n,r,o){a.drawElementsInstancedANGLE(e,t,n,r,o)}),(n=(r=t).getExtension("OES_vertex_array_object"))&&(r.createVertexArray=function(){return n.createVertexArrayOES()},r.deleteVertexArray=function(e){n.deleteVertexArrayOES(e)},r.bindVertexArray=function(e){n.bindVertexArrayOES(e)},r.isVertexArray=function(e){return n.isVertexArrayOES(e)}),(o=(r=t).getExtension("WEBGL_draw_buffers"))&&(r.drawBuffers=function(e,t){o.drawBuffersWEBGL(e,t)}),t.dibvbi=t.getExtension("WEBGL_draw_instanced_base_vertex_base_instance"),t.mdibvbi=t.getExtension("WEBGL_multi_draw_instanced_base_vertex_base_instance"),2<=e.version&&(t.disjointTimerQueryExt=t.getExtension("EXT_disjoint_timer_query_webgl2")),(e.version<2||!t.disjointTimerQueryExt)&&(t.disjointTimerQueryExt=t.getExtension("EXT_disjoint_timer_query")),t.multiDrawWebgl=t.getExtension("WEBGL_multi_draw"),(t.getSupportedExtensions()||[]).forEach(function(e){e.includes("lose_context")||e.includes("debug")||t.getExtension(e)}))}};function ge(e,t,n,r){for(var o=0;o<e;o++){var a=I[n](),i=a&&_.getNewId(r);a?r[a.name=i]=a:_.recordError(1282),h[t+4*o>>2]=i}}function he(t,e,n){if(e){var r,o,a=void 0;switch(t){case 36346:a=1;break;case 36344:return void(0!=n&&1!=n&&_.recordError(1280));case 34814:case 36345:a=0;break;case 34466:var i=I.getParameter(34467),a=i?i.length:0;break;case 33309:if(_.currentContext.version<2)return void _.recordError(1282);a=2*(I.getSupportedExtensions()||[]).length;break;case 33307:case 33308:if(_.currentContext.version<2)return void _.recordError(1280);a=33307==t?3:0}if(void 0===a){var u=I.getParameter(t);switch(_typeof(u)){case"number":a=u;break;case"boolean":a=u?1:0;break;case"string":return void _.recordError(1280);case"object":if(null===u)switch(t){case 34964:case 35725:case 34965:case 36006:case 36007:case 32873:case 34229:case 36662:case 36663:case 35053:case 35055:case 36010:case 35097:case 35869:case 32874:case 36389:case 35983:case 35368:case 34068:a=0;break;default:return void _.recordError(1280)}else{if(u instanceof Float32Array||u instanceof Uint32Array||u instanceof Int32Array||u instanceof Array){for(var s=0;s<u.length;++s)switch(n){case 0:h[e+4*s>>2]=u[s];break;case 2:b[e+4*s>>2]=u[s];break;case 4:d[e+s>>0]=u[s]?1:0}return}try{a=0|u.name}catch(e){return _.recordError(1280),void f("GL_INVALID_ENUM in glGet"+n+"v: Unknown object returned from WebGL getParameter("+t+")! (error: "+e+")")}}break;default:return _.recordError(1280),void f("GL_INVALID_ENUM in glGet"+n+"v: Native code calling glGet"+n+"v("+t+") and it returns "+u+" of type "+_typeof(u)+"!")}}switch(n){case 1:o=a,w[(r=e)>>2]=o,w[r+4>>2]=(o-w[r>>2])/4294967296;break;case 0:h[e>>2]=a;break;case 2:b[e>>2]=a;break;case 4:d[e>>0]=a?1:0}}else _.recordError(1281)}function we(e){return"]"==e.slice(-1)&&e.lastIndexOf("[")}function F(e){return 0==(e-=5120)?d:1==e?m:2==e?X:4==e?h:6==e?b:5==e||28922==e||28520==e||30779==e||30782==e?w:K}function S(e){return 31-Math.clz32(e.BYTES_PER_ELEMENT)}function be(e,t,n,r,o){var a,e=F(e),i=S(e);return a=_.unpackAlignment,e.subarray(o>>i,o+r*(n*(({5:3,6:4,8:2,29502:3,29504:4,26917:2,26918:2,29846:3,29847:4}[t-6402]||1)*(1<<i))+a-1&-a)>>i)}function A(e,t){var n,r;P.mainLoop.timingMode=e,P.mainLoop.timingValue=t,P.mainLoop.func&&(P.mainLoop.running||(P.mainLoop.running=!0),0==e?(P.mainLoop.scheduler=function(){var e=0|Math.max(0,P.mainLoop.tickStartTime+t-Le());setTimeout(P.mainLoop.runner,e)},P.mainLoop.method="timeout"):1==e?(P.mainLoop.scheduler=function(){P.requestAnimationFrame(P.mainLoop.runner)},P.mainLoop.method="rAF"):2==e&&(void 0===G&&(n=[],r="setimmediate",addEventListener("message",function(e){e.data!==r&&e.data.target!==r||(e.stopPropagation(),n.shift()())},!0),_readOnlyError("setImmediate")),P.mainLoop.scheduler=function(){G(P.mainLoop.runner)},P.mainLoop.method="immediate"))}function M(e,t){if(!l)if(t)e();else try{e()}catch(e){me(e)}}function ye(e,t){return setTimeout(function(){M(e)},t)}var xe,Le=function(){return performance.now()},P={mainLoop:{running:!1,scheduler:null,method:"",currentlyRunningMainloop:0,func:null,arg:0,timingMode:0,timingValue:0,currentFrameNumber:0,queue:[],pause:function(){P.mainLoop.scheduler=null,P.mainLoop.currentlyRunningMainloop++},resume:function(){P.mainLoop.currentlyRunningMainloop++;var e=P.mainLoop.timingMode,t=P.mainLoop.timingValue,n=P.mainLoop.func,o=(P.mainLoop.func=null,n),n=0,r=!1,a=P.mainLoop.arg,i=!0,u=(q(!P.mainLoop.func,"emscripten_set_main_loop: there can only be one main loop function at once: call emscripten_cancel_main_loop to cancel the previous one before setting a new one with different parameters."),P.mainLoop.func=o,P.mainLoop.arg=a,P.mainLoop.currentlyRunningMainloop);function s(){return!(u<P.mainLoop.currentlyRunningMainloop)}if(P.mainLoop.running=!1,P.mainLoop.runner=function(){var e,t,n,r;if(!l)return 0<P.mainLoop.queue.length?(e=Date.now(),(t=P.mainLoop.queue.shift()).func(t.arg),P.mainLoop.remainingBlockers&&(r=(n=P.mainLoop.remainingBlockers)%1==0?n-1:Math.floor(n),t.counted?P.mainLoop.remainingBlockers=r:P.mainLoop.remainingBlockers=(8*n+(r+=.5))/9),c('main loop blocker "'+t.name+'" took '+(Date.now()-e)+" ms"),P.mainLoop.updateStatus(),s()?void setTimeout(P.mainLoop.runner,0):void 0):void(s()&&(P.mainLoop.currentFrameNumber=P.mainLoop.currentFrameNumber+1|0,1==P.mainLoop.timingMode&&1<P.mainLoop.timingValue&&P.mainLoop.currentFrameNumber%P.mainLoop.timingValue!=0?P.mainLoop.scheduler():(0==P.mainLoop.timingMode&&(P.mainLoop.tickStartTime=Le()),_.newRenderingFrameStarted(),P.mainLoop.runIter(o),s()&&("object"==("undefined"==typeof SDL?"undefined":_typeof(SDL))&&SDL.audio&&SDL.audio.queueNewAudioData&&SDL.audio.queueNewAudioData(),P.mainLoop.scheduler()))))},i||(n&&0<n?A(0,1e3/n):A(1,1),P.mainLoop.scheduler()),r)throw"unwind";A(e,t),P.mainLoop.scheduler()},updateStatus:function(){var e,t,n;v.setStatus&&(e=v.statusMessage||"Please wait...",t=P.mainLoop.remainingBlockers,n=P.mainLoop.expectedBlockers,t?t<n?v.setStatus(e+" ("+(n-t)+"/"+n+")"):v.setStatus(e):v.setStatus(""))},runIter:function(e){if(!l){if(v.preMainLoop)if(!1===v.preMainLoop())return;M(e),v.postMainLoop&&v.postMainLoop()}}},isFullscreen:!1,pointerLock:!1,moduleContextCreatedCallbacks:[],workers:[],init:function(){if(v.preloadPlugins||(v.preloadPlugins=[]),!P.initted){P.initted=!0;try{new Blob,P.hasBlobConstructor=!0}catch(e){P.hasBlobConstructor=!1,c("warning: no blob constructor, cannot create blobs with mimetypes")}P.BlobBuilder="undefined"!=typeof MozBlobBuilder?MozBlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:P.hasBlobConstructor?null:c("warning: no BlobBuilder"),P.URLObject="undefined"!=typeof window?window.URL||window.webkitURL:void 0,v.noImageDecoding||void 0!==P.URLObject||(c("warning: Browser does not support creating object URLs. Built-in browser image decoding will not be available."),v.noImageDecoding=!0);var e={canHandle:function(e){return!v.noImageDecoding&&/\.(jpg|jpeg|png|bmp)$/i.test(e)},handle:function(t,n,r,o){var e,a=null;if(P.hasBlobConstructor)try{(a=new Blob([t],{type:P.getMimetype(n)})).size!==t.length&&(a=new Blob([new Uint8Array(t).buffer],{type:P.getMimetype(n)}))}catch(e){s("Blob constructor present but fails: "+e+"; falling back to blob builder")}a||((e=new P.BlobBuilder).append(new Uint8Array(t).buffer),a=e.getBlob());var i=P.URLObject.createObjectURL(a),u=new Image;u.onload=function(){q(u.complete,"Image "+n+" could not be decoded");var e=document.createElement("canvas");e.width=u.width,e.height=u.height,e.getContext("2d").drawImage(u,0,0),v.preloadedImages[n]=e,P.URLObject.revokeObjectURL(i),r&&r(t)},u.onerror=function(e){c("Image "+i+" could not be decoded"),o&&o()},u.src=i}},e=(v.preloadPlugins.push(e),{canHandle:function(e){return!v.noAudioDecoding&&e.substr(-4)in{".ogg":1,".wav":1,".mp3":1}}}),e=(e.handle=function(t,n,r,e){var o=!1;function a(e){o||(o=!0,v.preloadedAudios[n]=e,r&&r(t))}function i(){o||(o=!0,v.preloadedAudios[n]=new Audio,e&&e())}if(!P.hasBlobConstructor)return i();try{var u=new Blob([t],{type:P.getMimetype(n)})}catch(e){return i()}var u=P.URLObject.createObjectURL(u),s=new Audio;s.addEventListener("canplaythrough",function(){a(s)},!1),s.onerror=function(e){o||(c("warning: browser could not fully decode audio "+n+", trying slower base64 approach"),s.src="data:audio/x-"+n.substr(-3)+";base64,"+function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="",r=0,o=0,a=0;a<e.length;a++)for(r=r<<8|e[a],o+=8;6<=o;){var i=r>>o-6&63;o-=6,n+=t[i]}return 2==o?n=n+t[(3&r)<<4]+"==":4==o&&(n=n+t[(15&r)<<2]+"="),n}(t),a(s))},s.src=u,ye(function(){a(s)},1e4)},v.preloadPlugins.push(e),v.canvas);e&&(e.requestPointerLock=e.requestPointerLock||e.mozRequestPointerLock||e.webkitRequestPointerLock||e.msRequestPointerLock||function(){},e.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock||document.msExitPointerLock||function(){},e.exitPointerLock=e.exitPointerLock.bind(document),document.addEventListener("pointerlockchange",t,!1),document.addEventListener("mozpointerlockchange",t,!1),document.addEventListener("webkitpointerlockchange",t,!1),document.addEventListener("mspointerlockchange",t,!1),v.elementPointerLock&&e.addEventListener("click",function(e){!P.pointerLock&&v.canvas.requestPointerLock&&(v.canvas.requestPointerLock(),e.preventDefault())},!1))}function t(){P.pointerLock=document.pointerLockElement===v.canvas||document.mozPointerLockElement===v.canvas||document.webkitPointerLockElement===v.canvas||document.msPointerLockElement===v.canvas}},handledByPreloadPlugin:function(t,n,r,o){P.init();var a=!1;return v.preloadPlugins.forEach(function(e){a||e.canHandle(n)&&(e.handle(t,n,r,o),a=!0)}),a},createContext:function(e,t,n,r){if(t&&v.ctx&&e==v.canvas)return v.ctx;var o,a;if(t){var i={antialias:!1,alpha:!1,majorVersion:"undefined"!=typeof WebGL2RenderingContext?2:1};if(r)for(var u in r)i[u]=r[u];void 0!==_&&(a=_.createContext(e,i))&&(o=_.getContext(a).GLctx)}else o=e.getContext("2d");return o?(n&&(t||q(void 0===I,"cannot set in module if GLctx is used, but we are a non-GL context that would replace it"),v.ctx=o,t&&_.makeContextCurrent(a),v.useWebGL=t,P.moduleContextCreatedCallbacks.forEach(function(e){e()}),P.init()),o):null},destroyContext:function(e,t,n){},fullscreenHandlersInstalled:!1,lockPointer:void 0,resizeCanvas:void 0,requestFullscreen:function(e,t){P.lockPointer=e,P.resizeCanvas=t,void 0===P.lockPointer&&(P.lockPointer=!0),void 0===P.resizeCanvas&&(P.resizeCanvas=!1);var n=v.canvas;function r(){P.isFullscreen=!1;var e=n.parentNode;(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===e?(n.exitFullscreen=P.exitFullscreen,P.lockPointer&&n.requestPointerLock(),P.isFullscreen=!0,P.resizeCanvas?P.setFullscreenCanvasSize():P.updateCanvasDimensions(n)):(e.parentNode.insertBefore(n,e),e.parentNode.removeChild(e),P.resizeCanvas?P.setWindowedCanvasSize():P.updateCanvasDimensions(n)),v.onFullScreen&&v.onFullScreen(P.isFullscreen),v.onFullscreen&&v.onFullscreen(P.isFullscreen)}P.fullscreenHandlersInstalled||(P.fullscreenHandlersInstalled=!0,document.addEventListener("fullscreenchange",r,!1),document.addEventListener("mozfullscreenchange",r,!1),document.addEventListener("webkitfullscreenchange",r,!1),document.addEventListener("MSFullscreenChange",r,!1));var o=document.createElement("div");n.parentNode.insertBefore(o,n),o.appendChild(n),o.requestFullscreen=o.requestFullscreen||o.mozRequestFullScreen||o.msRequestFullscreen||(o.webkitRequestFullscreen?function(){o.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}:null)||(o.webkitRequestFullScreen?function(){o.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}:null),o.requestFullscreen()},exitFullscreen:function(){return!!P.isFullscreen&&((document.exitFullscreen||document.cancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen||document.webkitCancelFullScreen||function(){}).apply(document,[]),!0)},nextRAF:0,fakeRequestAnimationFrame:function(e){var t=Date.now();if(0===P.nextRAF)P.nextRAF=t+1e3/60;else for(;t+2>=P.nextRAF;)P.nextRAF+=1e3/60;var n=Math.max(P.nextRAF-t,0);setTimeout(e,n)},requestAnimationFrame:(xe=function(e){("function"==typeof requestAnimationFrame?requestAnimationFrame:P.fakeRequestAnimationFrame)(e)},Be.toString=function(){return xe.toString()},Be),safeSetTimeout:function(e){return ye(e)},safeRequestAnimationFrame:function(e){return P.requestAnimationFrame(function(){M(e)})},getMimetype:function(e){return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",bmp:"image/bmp",ogg:"audio/ogg",wav:"audio/wav",mp3:"audio/mpeg"}[e.substr(e.lastIndexOf(".")+1)]},getUserMedia:function(e){window.getUserMedia||(window.getUserMedia=navigator.getUserMedia||navigator.mozGetUserMedia),window.getUserMedia(e)},getMovementX:function(e){return e.movementX||e.mozMovementX||e.webkitMovementX||0},getMovementY:function(e){return e.movementY||e.mozMovementY||e.webkitMovementY||0},getMouseWheelDelta:function(e){var t=0;switch(e.type){case"DOMMouseScroll":t=e.detail/3;break;case"mousewheel":t=e.wheelDelta/120;break;case"wheel":switch(t=e.deltaY,e.deltaMode){case 0:t/=100;break;case 1:t/=3;break;case 2:t*=80;break;default:throw"unrecognized mouse wheel delta mode: "+e.deltaMode}break;default:throw"unrecognized mouse wheel event: "+e.type}return t},mouseX:0,mouseY:0,mouseMovementX:0,mouseMovementY:0,touches:{},lastTouches:{},calculateMouseEvent:function(e){if(P.pointerLock)"mousemove"!=e.type&&"mozMovementX"in e?P.mouseMovementX=P.mouseMovementY=0:(P.mouseMovementX=P.getMovementX(e),P.mouseMovementY=P.getMovementY(e)),"undefined"!=typeof SDL?(P.mouseX=SDL.mouseX+P.mouseMovementX,P.mouseY=SDL.mouseY+P.mouseMovementY):(P.mouseX+=P.mouseMovementX,P.mouseY+=P.mouseMovementY);else{var t,n=v.canvas.getBoundingClientRect(),r=v.canvas.width,o=v.canvas.height,a=void 0!==window.scrollX?window.scrollX:window.pageXOffset,i=void 0!==window.scrollY?window.scrollY:window.pageYOffset;if("touchstart"===e.type||"touchend"===e.type||"touchmove"===e.type)return void 0===(s=e.touch)?void 0:(t=s.pageX-(a+n.left),u=s.pageY-(i+n.top),t={x:t*=r/n.width,y:u*=o/n.height},void("touchstart"===e.type?(P.lastTouches[s.identifier]=t,P.touches[s.identifier]=t):"touchend"!==e.type&&"touchmove"!==e.type||(u=(u=P.touches[s.identifier])||t,P.lastTouches[s.identifier]=u,P.touches[s.identifier]=t)));var u=e.pageX-(a+n.left),s=e.pageY-(i+n.top);u*=r/n.width,s*=o/n.height,P.mouseMovementX=u-P.mouseX,P.mouseMovementY=s-P.mouseY,P.mouseX=u,P.mouseY=s}},resizeListeners:[],updateResizeListeners:function(){var t=v.canvas;P.resizeListeners.forEach(function(e){e(t.width,t.height)})},setCanvasSize:function(e,t,n){var r=v.canvas;P.updateCanvasDimensions(r,e,t),n||P.updateResizeListeners()},windowedWidth:0,windowedHeight:0,setFullscreenCanvasSize:function(){var e;"undefined"!=typeof SDL&&(e=w[SDL.screen>>2],h[SDL.screen>>2]=e|=8388608),P.updateCanvasDimensions(v.canvas),P.updateResizeListeners()},setWindowedCanvasSize:function(){var e;"undefined"!=typeof SDL&&(e=w[SDL.screen>>2],h[SDL.screen>>2]=e&=-8388609),P.updateCanvasDimensions(v.canvas),P.updateResizeListeners()},updateCanvasDimensions:function(e,t,n){t&&n?(e.widthNative=t,e.heightNative=n):(t=e.widthNative,n=e.heightNative);var r,o=t,a=n;v.forcedAspectRatio&&0<v.forcedAspectRatio&&(o/a<v.forcedAspectRatio?o=Math.round(a*v.forcedAspectRatio):a=Math.round(o/v.forcedAspectRatio)),(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===e.parentNode&&"undefined"!=typeof screen&&(r=Math.min(screen.width/o,screen.height/a),o=Math.round(o*r),a=Math.round(a*r)),P.resizeCanvas?(e.width!=o&&(e.width=o),e.height!=a&&(e.height=a),void 0!==e.style&&(e.style.removeProperty("width"),e.style.removeProperty("height"))):(e.width!=t&&(e.width=t),e.height!=n&&(e.height=n),void 0!==e.style&&(o!=t||a!=n?(e.style.setProperty("width",o+"px","important"),e.style.setProperty("height",a+"px","important")):(e.style.removeProperty("width"),e.style.removeProperty("height"))))}};function Be(e){return xe.apply(this,arguments)}function ke(e,t,n,r,o,a){this.id=e,this.x=0,this.y=0,this.fullscreen=!1,this.storedX=0,this.storedY=0,this.width=t,this.height=n,this.storedWidth=t,this.storedHeight=n,this.title=r,this.monitor=o,this.share=a,this.attributes=D.hints,this.inputModes={208897:212993,208898:0,208899:0},this.buttons=0,this.keys=new Array,this.domKeys=new Array,this.shouldClose=0,this.title=null,this.windowPosFunc=null,this.windowSizeFunc=null,this.windowCloseFunc=null,this.windowRefreshFunc=null,this.windowFocusFunc=null,this.windowIconifyFunc=null,this.framebufferSizeFunc=null,this.mouseButtonFunc=null,this.cursorPosFunc=null,this.cursorEnterFunc=null,this.scrollFunc=null,this.dropFunc=null,this.keyFunc=null,this.charFunc=null,this.userptr=null}var I,D={WindowFromId:function(e){return e<=0||!D.windows?null:D.windows[e-1]},joystickFunc:null,errorFunc:null,monitorFunc:null,active:null,windows:null,monitors:null,monitorString:null,versionString:null,initialTime:null,extensions:null,hints:null,defaultHints:{131073:0,131074:0,131075:1,131076:1,131077:1,135169:8,135170:8,135171:8,135172:8,135173:24,135174:8,135175:0,135176:0,135177:0,135178:0,135179:0,135180:0,135181:0,135182:0,135183:0,139265:196609,139266:1,139267:0,139268:0,139269:0,139270:0,139271:0,139272:0},DOMToGLFWKeyCode:function(e){switch(e){case 32:return 32;case 222:return 39;case 188:return 44;case 173:case 189:return 45;case 190:return 46;case 191:return 47;case 48:return 48;case 49:return 49;case 50:return 50;case 51:return 51;case 52:return 52;case 53:return 53;case 54:return 54;case 55:return 55;case 56:return 56;case 57:return 57;case 59:return 59;case 61:case 187:return 61;case 65:return 65;case 66:return 66;case 67:return 67;case 68:return 68;case 69:return 69;case 70:return 70;case 71:return 71;case 72:return 72;case 73:return 73;case 74:return 74;case 75:return 75;case 76:return 76;case 77:return 77;case 78:return 78;case 79:return 79;case 80:return 80;case 81:return 81;case 82:return 82;case 83:return 83;case 84:return 84;case 85:return 85;case 86:return 86;case 87:return 87;case 88:return 88;case 89:return 89;case 90:return 90;case 219:return 91;case 220:return 92;case 221:return 93;case 192:return 96;case 27:return 256;case 13:return 257;case 9:return 258;case 8:return 259;case 45:return 260;case 46:return 261;case 39:return 262;case 37:return 263;case 40:return 264;case 38:return 265;case 33:return 266;case 34:return 267;case 36:return 268;case 35:return 269;case 20:return 280;case 145:return 281;case 144:return 282;case 44:return 283;case 19:return 284;case 112:return 290;case 113:return 291;case 114:return 292;case 115:return 293;case 116:return 294;case 117:return 295;case 118:return 296;case 119:return 297;case 120:return 298;case 121:return 299;case 122:return 300;case 123:return 301;case 124:return 302;case 125:return 303;case 126:return 304;case 127:return 305;case 128:return 306;case 129:return 307;case 130:return 308;case 131:return 309;case 132:return 310;case 133:return 311;case 134:return 312;case 135:return 313;case 136:return 314;case 96:return 320;case 97:return 321;case 98:return 322;case 99:return 323;case 100:return 324;case 101:return 325;case 102:return 326;case 103:return 327;case 104:return 328;case 105:return 329;case 110:return 330;case 111:return 331;case 106:return 332;case 109:return 333;case 107:return 334;case 16:return 340;case 17:return 341;case 18:return 342;case 91:return 343;case 93:return 348;default:return-1}},getModBits:function(e){var t=0;return e.keys[340]&&(t|=1),e.keys[341]&&(t|=2),e.keys[342]&&(t|=4),e.keys[343]&&(t|=8),t},onKeyPress:function(e){D.active&&D.active.charFunc&&(e.ctrlKey||e.metaKey||(0==(e=e.charCode)||0<=e&&e<=31||C(D.active.charFunc)(D.active.id,e)))},onKeyChanged:function(e,t){var n,r;!D.active||-1!=(n=D.DOMToGLFWKeyCode(e))&&(r=t&&D.active.keys[n],D.active.keys[n]=t,D.active.domKeys[e]=t,D.active.keyFunc&&(r&&(t=2),C(D.active.keyFunc)(D.active.id,n,e,t,D.getModBits(D.active))))},onGamepadConnected:function(e){D.refreshJoysticks()},onGamepadDisconnected:function(e){D.refreshJoysticks()},onKeydown:function(e){D.onKeyChanged(e.keyCode,1)},onKeyup:function(e){D.onKeyChanged(e.keyCode,0)},onBlur:function(e){if(D.active)for(var t=0;t<D.active.domKeys.length;++t)D.active.domKeys[t]&&D.onKeyChanged(t,0)},onMousemove:function(e){D.active&&(P.calculateMouseEvent(e),e.target==v.canvas&&D.active.cursorPosFunc&&C(D.active.cursorPosFunc)(D.active.id,P.mouseX,P.mouseY))},DOMToGLFWMouseButton:function(e){e=e.button;return e=0<e?1==e?2:1:e},onMouseenter:function(e){D.active&&e.target==v.canvas&&D.active.cursorEnterFunc&&C(D.active.cursorEnterFunc)(D.active.id,1)},onMouseleave:function(e){D.active&&e.target==v.canvas&&D.active.cursorEnterFunc&&C(D.active.cursorEnterFunc)(D.active.id,0)},onMouseButtonChanged:function(e,t){if(D.active&&(P.calculateMouseEvent(e),e.target==v.canvas)){var n=D.DOMToGLFWMouseButton(e);if(1==t){D.active.buttons|=1<<n;try{e.target.setCapture()}catch(e){}}else D.active.buttons&=~(1<<n);D.active.mouseButtonFunc&&C(D.active.mouseButtonFunc)(D.active.id,n,t,D.getModBits(D.active))}},onMouseButtonDown:function(e){D.active&&D.onMouseButtonChanged(e,1)},onMouseButtonUp:function(e){D.active&&D.onMouseButtonChanged(e,0)},onMouseWheel:function(e){var t,n=0==(n=-P.getMouseWheelDelta(e))?0:0<n?Math.max(n,1):Math.min(n,-1);D.wheelPos+=n,D.active&&D.active.scrollFunc&&e.target==v.canvas&&(t=0,n=n,t="mousewheel"==e.type?e.wheelDeltaX:e.deltaX,C(D.active.scrollFunc)(D.active.id,t,n),e.preventDefault())},onCanvasResize:function(e,t){var n;D.active&&(n=!0,document.fullscreen||document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen?(D.active.storedX=D.active.x,D.active.storedY=D.active.y,D.active.storedWidth=D.active.width,D.active.storedHeight=D.active.height,D.active.x=D.active.y=0,D.active.width=screen.width,D.active.height=screen.height,D.active.fullscreen=!0):1==D.active.fullscreen?(D.active.x=D.active.storedX,D.active.y=D.active.storedY,D.active.width=D.active.storedWidth,D.active.height=D.active.storedHeight,D.active.fullscreen=!1):D.active.width!=e||D.active.height!=t?(D.active.width=e,D.active.height=t):n=!1,n&&(P.setCanvasSize(D.active.width,D.active.height,!0),D.onWindowSizeChanged(),D.onFramebufferSizeChanged()))},onWindowSizeChanged:function(){D.active&&D.active.windowSizeFunc&&M(function(){C(D.active.windowSizeFunc)(D.active.id,D.active.width,D.active.height)})},onFramebufferSizeChanged:function(){D.active&&D.active.framebufferSizeFunc&&M(function(){C(D.active.framebufferSizeFunc)(D.active.id,D.active.width,D.active.height)})},getTime:function(){return Le()/1e3},setWindowTitle:function(e,t){e=D.WindowFromId(e);e&&(e.title=y(t),D.active.id==e.id&&(document.title=e.title))},setJoystickCallback:function(e){D.joystickFunc=e,D.refreshJoysticks()},joys:{},lastGamepadState:[],lastGamepadStateFrame:null,refreshJoysticks:function(){if(P.mainLoop.currentFrameNumber!==D.lastGamepadStateFrame||!P.mainLoop.currentFrameNumber){D.lastGamepadState=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads||[],D.lastGamepadStateFrame=P.mainLoop.currentFrameNumber;for(var e=0;e<D.lastGamepadState.length;++e){var t=D.lastGamepadState[e];if(t){D.joys[e]||(c("glfw joystick connected:",e),D.joys[e]={id:ee(t.id),buttonsCount:t.buttons.length,axesCount:t.axes.length,buttons:U(t.buttons.length),axes:U(4*t.axes.length)},D.joystickFunc&&C(D.joystickFunc)(e,262145));for(var n=D.joys[e],r=0;r<t.buttons.length;++r)u(n.buttons+r,t.buttons[r].pressed,"i8");for(r=0;r<t.axes.length;++r)u(n.axes+4*r,t.axes[r],"float")}else D.joys[e]&&(c("glfw joystick disconnected",e),D.joystickFunc&&C(D.joystickFunc)(e,262146),R(D.joys[e].id),R(D.joys[e].buttons),R(D.joys[e].axes),delete D.joys[e])}}},setKeyCallback:function(e,t){var n,e=D.WindowFromId(e);return e?(n=e.keyFunc,e.keyFunc=t,n):null},setCharCallback:function(e,t){var n,e=D.WindowFromId(e);return e?(n=e.charFunc,e.charFunc=t,n):null},setMouseButtonCallback:function(e,t){var n,e=D.WindowFromId(e);return e?(n=e.mouseButtonFunc,e.mouseButtonFunc=t,n):null},setCursorPosCallback:function(e,t){var n,e=D.WindowFromId(e);return e?(n=e.cursorPosFunc,e.cursorPosFunc=t,n):null},setScrollCallback:function(e,t){var n,e=D.WindowFromId(e);return e?(n=e.scrollFunc,e.scrollFunc=t,n):null},setDropCallback:function(e,t){var n,e=D.WindowFromId(e);return e?(n=e.dropFunc,e.dropFunc=t,n):null},onDrop:function(e){if(D.active&&D.active.dropFunc&&e.dataTransfer&&e.dataTransfer.files&&0!=e.dataTransfer.files.length)return e.preventDefault(),!1},onDragover:function(e){if(D.active&&D.active.dropFunc)return e.preventDefault(),!1},setWindowSizeCallback:function(e,t){var n,e=D.WindowFromId(e);return e?(n=e.windowSizeFunc,e.windowSizeFunc=t,n):null},setWindowCloseCallback:function(e,t){var n,e=D.WindowFromId(e);return e?(n=e.windowCloseFunc,e.windowCloseFunc=t,n):null},setWindowRefreshCallback:function(e,t){var n,e=D.WindowFromId(e);return e?(n=e.windowRefreshFunc,e.windowRefreshFunc=t,n):null},onClickRequestPointerLock:function(e){!P.pointerLock&&v.canvas.requestPointerLock&&(v.canvas.requestPointerLock(),e.preventDefault())},setInputMode:function(e,t,n){var r=D.WindowFromId(e);if(r)switch(t){case 208897:switch(n){case 212993:r.inputModes[t]=n,v.canvas.removeEventListener("click",D.onClickRequestPointerLock,!0),v.canvas.exitPointerLock();break;case 212994:c("glfwSetInputMode called with GLFW_CURSOR_HIDDEN value not implemented.");break;case 212995:r.inputModes[t]=n,v.canvas.addEventListener("click",D.onClickRequestPointerLock,!0),v.canvas.requestPointerLock();break;default:c("glfwSetInputMode called with unknown value parameter value: "+n+".")}break;case 208898:c("glfwSetInputMode called with GLFW_STICKY_KEYS mode not implemented.");break;case 208899:c("glfwSetInputMode called with GLFW_STICKY_MOUSE_BUTTONS mode not implemented.");break;default:c("glfwSetInputMode called with unknown mode parameter value: "+t+".")}},getKey:function(e,t){e=D.WindowFromId(e);return e?e.keys[t]:0},getMouseButton:function(e,t){e=D.WindowFromId(e);return e?0<(e.buttons&1<<t):0},getCursorPos:function(e,t,n){u(t,P.mouseX,"double"),u(n,P.mouseY,"double")},getMousePos:function(e,t,n){u(t,P.mouseX,"i32"),u(n,P.mouseY,"i32")},setCursorPos:function(e,t,n){},getWindowPos:function(e,t,n){var r=0,o=0,e=D.WindowFromId(e);e&&(r=e.x,o=e.y),t&&u(t,r,"i32"),n&&u(n,o,"i32")},setWindowPos:function(e,t,n){e=D.WindowFromId(e);e&&(e.x=t,e.y=n)},getWindowSize:function(e,t,n){var r=0,o=0,e=D.WindowFromId(e);e&&(r=e.width,o=e.height),t&&u(t,r,"i32"),n&&u(n,o,"i32")},setWindowSize:function(e,t,n){e=D.WindowFromId(e);e&&(D.active.id==e.id&&(t==screen.width&&n==screen.height?P.requestFullscreen():(P.exitFullscreen(),P.setCanvasSize(t,n),e.width=t,e.height=n)),e.windowSizeFunc&&C(e.windowSizeFunc)(e.id,t,n))},createWindow:function(e,t,n,r,o){for(var a,i=0;i<D.windows.length&&null!==D.windows[i];i++);if(0<i)throw"glfwCreateWindow only supports one window at time currently";if(a=i+1,e<=0||t<=0)return 0;for(r?P.requestFullscreen():P.setCanvasSize(e,t),i=0;i<D.windows.length&&null==D.windows[i];i++);var u,s=0<D.hints[139265];return i==D.windows.length&&(s?(u={antialias:1<D.hints[135181],depth:0<D.hints[135173],stencil:0<D.hints[135174],alpha:0<D.hints[135172]},v.ctx=P.createContext(v.canvas,!0,!0,u)):P.init()),!v.ctx&&s?0:(u=new ke(a,e,t,n,r,o),a-1==D.windows.length?D.windows.push(u):D.windows[a-1]=u,(D.active=u).id)},destroyWindow:function(e){e=D.WindowFromId(e);if(e){e.windowCloseFunc&&C(e.windowCloseFunc)(e.id),D.windows[e.id-1]=null,D.active.id==e.id&&(D.active=null);for(var t=0;t<D.windows.length;t++)if(null!==D.windows[t])return;v.ctx=P.destroyContext(v.canvas,!0,!0)}},swapBuffers:function(e){},GLFW2ParamToGLFW3Param:function(e){return{196609:0,196610:0,196611:0,196612:0,196613:0,196614:0,131073:0,131074:0,131075:0,131076:0,131077:135169,131078:135170,131079:135171,131080:135172,131081:135173,131082:135174,131083:135183,131084:135175,131085:135176,131086:135177,131087:135178,131088:135179,131089:135180,131090:0,131091:135181,131092:139266,131093:139267,131094:139270,131095:139271,131096:139272}[e]}};v.requestFullscreen=function(e,t){P.requestFullscreen(e,t)},v.requestAnimationFrame=function(e){P.requestAnimationFrame(e)},v.setCanvasSize=function(e,t,n){P.setCanvasSize(e,t,n)},v.pauseMainLoop=function(){P.mainLoop.pause()},v.resumeMainLoop=function(){P.mainLoop.resume()},v.getUserMedia=function(){P.getUserMedia()},v.createContext=function(e,t,n,r){return P.createContext(e,t,n,r)};var Ee,Ce={c:function(){B("")},a:function(e,t,n){return t=function(e,t){for(ve.length=0,t>>=2;n=m[e++];){var n=n<105;n&&1&t&&t++,ve.push(n?J[t++>>1]:h[t]),++t}return ve}(t,n),de[e].apply(null,t)},V:function(e,t,n){m.copyWithin(e,t,t+n)},U:function(e){var t=m.length,n=(e>>>=0,2147483648);if(!(n<e))for(var r,o=1;o<=4;o*=2){var a=t*(1+.2/o),a=Math.min(a,e+100663296);if(function(e){try{return j.grow(e-p.byteLength+65535>>>16),te(j.buffer),1}catch(e){}}(Math.min(n,(a=Math.max(e,a))+((r=65536)-a%r)%r)))return!0}return!1},H:function(e){Pe(e)},F:function(e,t,n,r){for(var o=0,a=0;a<n;a++){var i=h[t>>2],u=h[t+4>>2];t+=8;for(var s=0;s<u;s++)pe.printChar(e,m[i+s]);o+=u}return h[r>>2]=o,0},pa:function(e){I.activeTexture(e)},Q:function(e,t){I.attachShader(_.programs[e],_.shaders[t])},b:function(e,t){34962==e?I.currentArrayBufferBinding=t:34963==e&&(I.currentElementArrayBufferBinding=t),35051==e?I.currentPixelPackBufferBinding=t:35052==e&&(I.currentPixelUnpackBufferBinding=t),I.bindBuffer(e,_.buffers[t])},n:function(e,t,n){I.bindBufferBase(e,t,_.buffers[n])},v:function(e,t){I.bindFramebuffer(e,_.framebuffers[t])},s:function(e,t){I.bindTexture(e,_.textures[t])},i:function(e){I.bindVertexArray(_.vaos[e]),e=I.getParameter(34965),I.currentElementArrayBufferBinding=e?0|e.name:0},Aa:function(e,t){I.blendFunc(e,t)},za:function(e,t,n,r){I.blendFuncSeparate(e,t,n,r)},J:function(e,t,n,r,o,a,i,u,s,c){I.blitFramebuffer(e,t,n,r,o,a,i,u,s,c)},e:function(e,t,n,r){2<=_.currentContext.version?n?I.bufferData(e,m,r,n,t):I.bufferData(e,t,r):I.bufferData(e,n?m.subarray(n,n+t):t,r)},l:function(e,t,n,r){2<=_.currentContext.version?I.bufferSubData(e,t,m,r,n):I.bufferSubData(e,t,m.subarray(r,r+n))},da:function(e){I.clear(e)},ea:function(e,t,n,r){I.clearColor(e,t,n,r)},fa:function(e){I.clearDepth(e)},G:function(e,t,n,r){I.colorMask(!!e,!!t,!!n,!!r)},M:function(e){I.compileShader(_.shaders[e])},va:function(){var e=_.getNewId(_.programs),t=I.createProgram();return t.name=e,t.maxUniformLength=t.maxAttributeLength=t.maxUniformBlockNameLength=0,t.uniformIdCounter=1,_.programs[e]=t,e},O:function(e){var t=_.getNewId(_.shaders);return _.shaders[t]=I.createShader(e),t},ya:function(e){I.cullFace(e)},g:function(e,t){for(var n=0;n<e;n++){var r=h[t+4*n>>2],o=_.buffers[r];o&&(I.deleteBuffer(o),o.name=0,_.buffers[r]=null,r==I.currentArrayBufferBinding&&(I.currentArrayBufferBinding=0),r==I.currentElementArrayBufferBinding&&(I.currentElementArrayBufferBinding=0),r==I.currentPixelPackBufferBinding&&(I.currentPixelPackBufferBinding=0),r==I.currentPixelUnpackBufferBinding&&(I.currentPixelUnpackBufferBinding=0))}},z:function(e,t){for(var n=0;n<e;++n){var r=h[t+4*n>>2],o=_.framebuffers[r];o&&(I.deleteFramebuffer(o),o.name=0,_.framebuffers[r]=null)}},R:function(e){var t;e&&((t=_.programs[e])?(I.deleteProgram(t),t.name=0,_.programs[e]=null):_.recordError(1281))},r:function(e,t){for(var n=0;n<e;n++){var r=h[t+4*n>>2],o=_.renderbuffers[r];o&&(I.deleteRenderbuffer(o),o.name=0,_.renderbuffers[r]=null)}},E:function(e){var t;e&&((t=_.shaders[e])?(I.deleteShader(t),_.shaders[e]=null):_.recordError(1281))},j:function(e,t){for(var n=0;n<e;n++){var r=h[t+4*n>>2],o=_.textures[r];o&&(I.deleteTexture(o),o.name=0,_.textures[r]=null)}},B:function(e,t){for(var n=0;n<e;n++){var r=h[t+4*n>>2];I.deleteVertexArray(_.vaos[r]),_.vaos[r]=null}},xa:function(e){I.depthFunc(e)},T:function(e){I.depthMask(!!e)},A:function(e){I.disable(e)},ga:function(e,t,n){_.preDrawHandleClientVertexAttribBindings(t+n),I.drawArrays(e,t,n),_.postDrawHandleClientVertexAttribBindings()},ha:function(e,t,n,r){I.drawArraysInstanced(e,t,n,r)},ia:function(e,t,n,r){var o,a;I.currentElementArrayBufferBinding||(o=_.calcBufLength(1,n,0,t),a=_.getTempIndexBuffer(o),I.bindBuffer(34963,a),I.bufferSubData(34963,0,m.subarray(r,r+o)),r=0),_.preDrawHandleClientVertexAttribBindings(t),I.drawElements(e,t,n,r),_.postDrawHandleClientVertexAttribBindings(t),I.currentElementArrayBufferBinding||I.bindBuffer(34963,null)},ja:function(e,t,n,r,o){I.drawElementsInstanced(e,t,n,r,o)},w:function(e){I.enable(e)},la:function(e){_.currentContext.clientBuffers[e].enabled=!0,I.enableVertexAttribArray(e)},ca:function(){I.flush()},oa:function(e,t,n,r,o){I.framebufferTexture2D(e,t,n,_.textures[r],o)},na:function(e,t,n,r,o){I.framebufferTextureLayer(e,t,_.textures[n],r,o)},f:function(e,t){ge(e,t,"createBuffer",_.buffers)},y:function(e,t){ge(e,t,"createFramebuffer",_.framebuffers)},L:function(e,t){ge(e,t,"createTexture",_.textures)},ma:function(e,t){ge(e,t,"createVertexArray",_.vaos)},wa:function(e,t,n,r){var o=I.getAttachedShaders(_.programs[e]),a=o.length;h[n>>2]=a=t<a?t:a;for(var i=0;i<a;++i){var u=_.shaders.indexOf(o[i]);h[r+4*i>>2]=u}},q:function(e,t){return I.getAttribLocation(_.programs[e],y(t))},d:function(e,t){he(e,t,0)},S:function(e,t,n){if(n)if(e>=_.counter)_.recordError(1281);else if(e=_.programs[e],35716==t){var r=I.getProgramInfoLog(e);h[n>>2]=(r=null===r?"(unknown error)":r).length+1}else if(35719==t){if(!e.maxUniformLength)for(var o=0;o<I.getProgramParameter(e,35718);++o)e.maxUniformLength=Math.max(e.maxUniformLength,I.getActiveUniform(e,o).name.length+1);h[n>>2]=e.maxUniformLength}else if(35722==t){if(!e.maxAttributeLength)for(o=0;o<I.getProgramParameter(e,35721);++o)e.maxAttributeLength=Math.max(e.maxAttributeLength,I.getActiveAttrib(e,o).name.length+1);h[n>>2]=e.maxAttributeLength}else if(35381==t){if(!e.maxUniformBlockNameLength)for(o=0;o<I.getProgramParameter(e,35382);++o)e.maxUniformBlockNameLength=Math.max(e.maxUniformBlockNameLength,I.getActiveUniformBlockName(e,o).length+1);h[n>>2]=e.maxUniformBlockNameLength}else h[n>>2]=I.getProgramParameter(e,t);else _.recordError(1281)},P:function(e,t,n){var r;n?35716==t?(r=(r=null===(r=I.getShaderInfoLog(_.shaders[e]))?"(unknown error)":r)?r.length+1:0,h[n>>2]=r):35720==t?(r=(r=I.getShaderSource(_.shaders[e]))?r.length+1:0,h[n>>2]=r):h[n>>2]=I.getShaderParameter(_.shaders[e],t):_.recordError(1281)},I:function(e,t,n){n?h[n>>2]=I.getTexParameter(e,t):_.recordError(1281)},o:function(e,t){return I.getUniformBlockIndex(_.programs[e],y(t))},k:function(e,t){if(t=y(t),e=_.programs[e]){var n,r,o=e,a=o.uniformLocsById,i=o.uniformSizeAndIdsByName;if(!a)for(o.uniformLocsById=a={},o.uniformArrayNamesById={},n=0;n<I.getProgramParameter(o,35718);++n){var u=I.getActiveUniform(o,n),s=u.name,c=u.size,u=we(s),f=0<u?s.slice(0,u):s,l=o.uniformIdCounter;for(o.uniformIdCounter+=c,i[f]=[c,l],r=0;r<c;++r)a[l]=r,o.uniformArrayNamesById[l++]=f}var d=e.uniformLocsById,m=0,v=t,p=we(t),g=(0<p&&(g=t.slice(p+1),m=parseInt(g)>>>0,v=t.slice(0,p)),e.uniformSizeAndIdsByName[v]);if(g&&m<g[0]&&(d[m+=g[1]]=d[m]||I.getUniformLocation(e,t)))return m}else _.recordError(1281);var g;return-1},h:function(e){return(e=_.buffers[e])?I.isBuffer(e):0},ua:function(e){e=_.programs[e],I.linkProgram(e),e.uniformLocsById=0,e.uniformSizeAndIdsByName={}},ta:function(e,t){3317==e&&(_.unpackAlignment=t),I.pixelStorei(e,t)},C:function(e,t,n,r){I.scissor(e,t,n,r)},N:function(e,t,n,r){t=_.getSource(e,t,n,r),I.shaderSource(_.shaders[e],t)},sa:function(e,t,n,r,o,a,i,u,s){var c;2<=_.currentContext.version?I.currentPixelUnpackBufferBinding?I.texImage2D(e,t,n,r,o,a,i,u,s):s?(c=F(u),I.texImage2D(e,t,n,r,o,a,i,u,c,s>>S(c))):I.texImage2D(e,t,n,r,o,a,i,u,null):I.texImage2D(e,t,n,r,o,a,i,u,s?be(u,i,r,o,s):null)},ra:function(e,t,n,r,o,a,i,u,s,c){var f;I.currentPixelUnpackBufferBinding?I.texImage3D(e,t,n,r,o,a,i,u,s,c):c?(f=F(s),I.texImage3D(e,t,n,r,o,a,i,u,s,f,c>>S(f))):I.texImage3D(e,t,n,r,o,a,i,u,s,null)},m:function(e,t,n){I.texParameteri(e,t,n)},K:function(e,t,n,r,o,a,i,u,s){var c;2<=_.currentContext.version?I.currentPixelUnpackBufferBinding?I.texSubImage2D(e,t,n,r,o,a,i,u,s):s?(c=F(u),I.texSubImage2D(e,t,n,r,o,a,i,u,c,s>>S(c))):I.texSubImage2D(e,t,n,r,o,a,i,u,null):(c=null,s&&(c=be(u,i,o,a,s)),I.texSubImage2D(e,t,n,r,o,a,i,u,c))},qa:function(e,t,n,r,o,a,i,u,s,c,f){var l;I.currentPixelUnpackBufferBinding?I.texSubImage3D(e,t,n,r,o,a,i,u,s,c,f):f?(l=F(c),I.texSubImage3D(e,t,n,r,o,a,i,u,s,c,l,f>>S(l))):I.texSubImage3D(e,t,n,r,o,a,i,u,s,c,null)},x:function(e,t){I.uniform1i(function(e){var t,n=I.currentProgram;if(n)return"number"==typeof(t=n.uniformLocsById[e])&&(n.uniformLocsById[e]=t=I.getUniformLocation(n,n.uniformArrayNamesById[e]+(0<t?"["+t+"]":""))),t;_.recordError(1282)}(e),t)},p:function(e,t,n){e=_.programs[e],I.uniformBlockBinding(e,t,n)},t:function(e){e=_.programs[e],I.useProgram(e),I.currentProgram=e},ka:function(e,t,n,r,o,a){var i=_.currentContext.clientBuffers[e];I.currentArrayBufferBinding?(i.clientside=!1,I.vertexAttribPointer(e,t,n,!!r,o,a)):(i.size=t,i.type=n,i.normalized=r,i.stride=o,i.ptr=a,i.clientside=!0,i.vertexAttribPointerAdaptor=function(e,t,n,r,o,a){this.vertexAttribPointer(e,t,n,r,o,a)})},D:function(e,t,n,r){I.viewport(e,t,n,r)},Z:function(e,t,n,r,o){return D.createWindow(e,t,n,r,o)},_:function(){return D.windows||(D.initialTime=D.getTime(),D.hints=D.defaultHints,D.windows=new Array,D.active=null,window.addEventListener("gamepadconnected",D.onGamepadConnected,!0),window.addEventListener("gamepaddisconnected",D.onGamepadDisconnected,!0),window.addEventListener("keydown",D.onKeydown,!0),window.addEventListener("keypress",D.onKeyPress,!0),window.addEventListener("keyup",D.onKeyup,!0),window.addEventListener("blur",D.onBlur,!0),v.canvas.addEventListener("touchmove",D.onMousemove,!0),v.canvas.addEventListener("touchstart",D.onMouseButtonDown,!0),v.canvas.addEventListener("touchcancel",D.onMouseButtonUp,!0),v.canvas.addEventListener("touchend",D.onMouseButtonUp,!0),v.canvas.addEventListener("mousemove",D.onMousemove,!0),v.canvas.addEventListener("mousedown",D.onMouseButtonDown,!0),v.canvas.addEventListener("mouseup",D.onMouseButtonUp,!0),v.canvas.addEventListener("wheel",D.onMouseWheel,!0),v.canvas.addEventListener("mousewheel",D.onMouseWheel,!0),v.canvas.addEventListener("mouseenter",D.onMouseenter,!0),v.canvas.addEventListener("mouseleave",D.onMouseleave,!0),v.canvas.addEventListener("drop",D.onDrop,!0),v.canvas.addEventListener("dragover",D.onDragover,!0),P.resizeListeners.push(function(e,t){D.onCanvasResize(e,t)})),1},X:function(e){},aa:function(){},$:function(e){var t=D.errorFunc;return D.errorFunc=e,t},ba:function(e){D.swapBuffers(e)},W:function(e){0==(e=Math.abs(e))?A(0,0):A(1,e)},Y:function(){window.removeEventListener("gamepadconnected",D.onGamepadConnected,!0),window.removeEventListener("gamepaddisconnected",D.onGamepadDisconnected,!0),window.removeEventListener("keydown",D.onKeydown,!0),window.removeEventListener("keypress",D.onKeyPress,!0),window.removeEventListener("keyup",D.onKeyup,!0),window.removeEventListener("blur",D.onBlur,!0),v.canvas.removeEventListener("touchmove",D.onMousemove,!0),v.canvas.removeEventListener("touchstart",D.onMouseButtonDown,!0),v.canvas.removeEventListener("touchcancel",D.onMouseButtonUp,!0),v.canvas.removeEventListener("touchend",D.onMouseButtonUp,!0),v.canvas.removeEventListener("mousemove",D.onMousemove,!0),v.canvas.removeEventListener("mousedown",D.onMouseButtonDown,!0),v.canvas.removeEventListener("mouseup",D.onMouseButtonUp,!0),v.canvas.removeEventListener("wheel",D.onMouseWheel,!0),v.canvas.removeEventListener("mousewheel",D.onMouseWheel,!0),v.canvas.removeEventListener("mouseenter",D.onMouseenter,!0),v.canvas.removeEventListener("mouseleave",D.onMouseleave,!0),v.canvas.removeEventListener("drop",D.onDrop,!0),v.canvas.removeEventListener("dragover",D.onDragover,!0),v.canvas.width=v.canvas.height=1,D.windows=null,D.active=null},u:function(e,t){D.hints[e]=t}},R=(function(){var t={a:Ce};function n(e,t){var e=e.exports;v.asm=e,te((j=v.asm.Ba).buffer),ne=v.asm.Ra,e=v.asm.Ca,oe.unshift(e),x--,v.monitorRunDependencies&&v.monitorRunDependencies(x),0==x&&(null!==ce&&(clearInterval(ce),ce=null),L&&(e=L,L=null,e()))}function r(e){n(e.instance)}function o(e){return(i||!N&&!a||"function"!=typeof fetch?Promise.resolve().then(function(){return le(k)}):fetch(k,{credentials:"same-origin"}).then(function(e){if(e.ok)return e.arrayBuffer();throw"failed to load wasm binary file at '"+k+"'"}).catch(function(){return le(k)})).then(function(e){return WebAssembly.instantiate(e,t)}).then(function(e){return e}).then(e,function(e){f("failed to asynchronously prepare wasm: "+e),B(e)})}if(x++,v.monitorRunDependencies&&v.monitorRunDependencies(x),v.instantiateWasm)try{return v.instantiateWasm(t,n)}catch(e){return f("Module.instantiateWasm callback failed with error: "+e)}i||"function"!=typeof WebAssembly.instantiateStreaming||fe(k)||"function"!=typeof fetch?o(r):fetch(k,{credentials:"same-origin"}).then(function(e){return WebAssembly.instantiateStreaming(e,t).then(r,function(e){return f("wasm streaming compile failed: "+e),f("falling back to ArrayBuffer instantiation"),o(r)})})}(),v.___wasm_call_ctors=function(){return(v.___wasm_call_ctors=v.asm.Ca).apply(null,arguments)},v._onTextureLoad=function(){return(v._onTextureLoad=v.asm.Da).apply(null,arguments)},v._textureWrite=function(){return(v._textureWrite=v.asm.Ea).apply(null,arguments)},v._onLoad=function(){return(v._onLoad=v.asm.Fa).apply(null,arguments)},v._free=function(){return(R=v._free=v.asm.Ga).apply(null,arguments)}),U=(v._start=function(){return(v._start=v.asm.Ha).apply(null,arguments)},v._key=function(){return(v._key=v.asm.Ia).apply(null,arguments)},v._update=function(){return(v._update=v.asm.Ja).apply(null,arguments)},v._render=function(){return(v._render=v.asm.Ka).apply(null,arguments)},v._pointDown=function(){return(v._pointDown=v.asm.La).apply(null,arguments)},v._pointDrag=function(){return(v._pointDrag=v.asm.Ma).apply(null,arguments)},v._pointUp=function(){return(v._pointUp=v.asm.Na).apply(null,arguments)},v._pointMove=function(){return(v._pointMove=v.asm.Oa).apply(null,arguments)},v._pointLeave=function(){return(v._pointLeave=v.asm.Pa).apply(null,arguments)},v._main=function(){return(v._main=v.asm.Qa).apply(null,arguments)},v._malloc=function(){return(U=v._malloc=v.asm.Sa).apply(null,arguments)}),_e=v.stackSave=function(){return(_e=v.stackSave=v.asm.Ta).apply(null,arguments)},Fe=v.stackRestore=function(){return(Fe=v.stackRestore=v.asm.Ua).apply(null,arguments)},Se=v.stackAlloc=function(){return(Se=v.stackAlloc=v.asm.Va).apply(null,arguments)};function Ae(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}v.ccall=Y;v.cwrap=function(e,t,n,r){var o=(n=n||[]).every(function(e){return"number"===e});return"string"!==t&&o&&!r?H(e):function(){return Y(e,t,n,arguments)}};function Me(e){function t(){Ee||(Ee=!0,v.calledRun=!0,l||(r(oe),r(ae),v.onRuntimeInitialized&&v.onRuntimeInitialized(),Ie&&function(){var e=v._main;try{var t=e(0,0);Pe(t)}catch(e){return me(e)}finally{0}}(),se()))}0<x||(ue(),0<x||(v.setStatus?(v.setStatus("Running..."),setTimeout(function(){setTimeout(function(){v.setStatus("")},1),t()},1)):t()))}function Pe(e){e=n=e;n=e,V||(v.onExit&&v.onExit(e),l=!0),O(e,new Ae(e))}if(L=function e(){Ee||Me(),Ee||(L=e)},v.run=Me,v.preInit)for("function"==typeof v.preInit&&(v.preInit=[v.preInit]);0<v.preInit.length;)v.preInit.pop()();var Ie=!0;v.noInitialRun&&(Ie=!1),Me()},{}]},{},[4])(4)});